---
title: "架构规划"
description: "你需要多少机器，每台机器是什么角色？"
weight: 33
chapter: true
draft: false
---

### 根据业务场景

# 规划你的 inventory

{{% notice info %}}
最小部署仅演示或测试，不可扩展。

中型部署可以向大型部署扩展，只需给对应的组添加主机即可。

`共用`表示该组机器同时可以存在于其它组。
{{% /notice %}}

# 我的建议

## 最小部署：3 主机。

适合测试、演示。或者是你只需要一个 ES 集群(logstash/kibana 主机数为 0)。

| 组名      | 主机数 | 共用 | 备注 |
| :---------: | :------: | :----: | :----: |
| esMasters | 3      | 是   |      |
| esHots    | 0      |      |      |
| esWarms   | 0      |      |      |
| redis     | 0      |      |      |
| logstash  | 3      | 是   |      |
| kibana    | 3      | 是   |      |

## 中型部署：9 主机。

对集群稳定性有要求，并且需要独立 ES 数据存储节点的。

| 组名        | 主机数   | 共用   | 备注         |
| :---------: | :------: | :----: | :----------: |
| esMasters   | 3        | 否     | 不存储数据   |
| esHots      | 3        | 否     | 存储数据     |
| esWarms     | 0        |        |              |
| redis       | 0        |        |              |
| logstash    | 3        | 是     |              |
| kibana      | 3        | 是     |              |

## 大型部署：16+ 主机。

高可用，高并发，具有冷热数据分离的架构

| 组名      | 主机数 | 共用 | 备注       |
| :---------: | :------: | :----: | :----------: |
| esMasters | 3      | 否   | 不存储数据 |
| esHots    | 3      | 否   | 存储热数据 |
| esWarms   | 3      | 否   | 存储冷数据 |
| redis     | 3      | 否   |            |
| logstash  | 2+     | 否   |            |
| kibana    | 2+     | 否   |            |
